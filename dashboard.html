auth.onAuthStateChanged((user) => {
    if (user) {
      db.ref('users/' + user.uid).once('value').then((snapshot) => {
        const role = snapshot.val()?.role;
        if (role === 'admin' || role === 'teacher') {
          console.log('Access granted.');
        } else {
          alert('Access denied.');
          window.location.href = '/index.html'; // Redirect unauthorized users
        }
      });
    } else {
      alert('You need to log in first.');
      window.location.href = '/index.html';
    }
  });
  