<html>
    <head>
        <title>class attendance</title>
        <link rel="stylesheet" href="styles.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <!-- Firebase App (Core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"></script>

<script>
  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBNMlCQQVsM7HVu0-PpqQIlT4y7fi3zZi0",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "class-addmin",
    storageBucket: "class-addmin.firebasestorage.app",
    messagingSenderId: "500990448706",
    appId: "1:500990448706:web:e204a4aa3cecf1b4bb09db"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();
</script>

<h2>Admin/Teacher Login</h2>
<form id="loginForm">
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Password" required />
  <button type="submit">Login</button>
</form>
<p id="error"></p>

<script>
  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    // Firebase Authentication
    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        // Check role in the database
        db.ref('users/' + user.uid).once('value').then((snapshot) => {
          const role = snapshot.val()?.role;
          if (role === 'admin' || role === 'teacher') {
            alert('Login successful!');
            window.location.href = '/dashboard.html'; // Redirect to dashboard
          } else {
            alert('Access denied. Only admins or teachers are allowed.');
            auth.signOut(); // Sign out unauthorized users
          }
        });
      })
      .catch((error) => {
        document.getElementById('error').innerText = error.message;
      });
  });
</script>


    </body>
</html>